<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Local Storyteller Magazine</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #333;
            --secondary-color: #555;
            --accent-color: #8B4513;
            --burnt-orange: #CC5500;
            --light-bg: #e6f2ff;
            --white: #fff;
            --gray: #ddd;
            --dark-gray: #777;
            --sky-blue: #a8d0f0;
            --pale-blue: #f0f8ff;
            --medium-blue: #4a6fa5;
            --success-color: #28a745;
            --error-color: #dc3545;
            --universal-purple: #6c5ce7;
            --warning-color: #ffc107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Georgia', serif;
        }
        
        body {
            background-color: var(--pale-blue);
            color: var(--primary-color);
            line-height: 1.6;
        }
        
        .container {
            width: 80%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo img {
            height: 150px;
            width: auto;
            margin-right: 15px;
        }
        
        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            letter-spacing: 1px;
        }
        
        .tagline {
            font-size: 0.9rem;
            color: var(--dark-gray);
            font-style: italic;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 25px;
        }
        
        nav ul li a {
            text-decoration: none;
            color: var(--primary-color);
            font-weight: 500;
            font-size: 1rem;
            transition: color 0.3s;
            position: relative;
        }
        
        nav ul li a:hover {
            color: var(--accent-color);
        }
        
        nav ul li a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--accent-color);
            transition: width 0.3s;
        }
        
        nav ul li a:hover::after {
            width: 100%;
        }
        
        /* User Account Section */
        .user-account {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-info {
            display: none;
            align-items: center;
            gap: 10px;
        }
        
        .user-info.active {
            display: flex;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent-color);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .user-email {
            font-size: 0.9rem;
            color: var(--secondary-color);
        }
        
        .logout-btn {
            background: none;
            border: none;
            color: var(--error-color);
            cursor: pointer;
            font-size: 0.9rem;
            transition: color 0.3s;
        }
        
        .logout-btn:hover {
            color: #c82333;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url("https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80") center/cover no-repeat;
            height: 30vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--white);
        }
        
        .hero-content {
            max-width: 800px;
            padding: 0 20px;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        
        .hero p {
            font-size: 1.1rem;
            margin-bottom: 20px;
            font-style: italic;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }
        
        .btn {
            display: inline-block;
            background-color: var(--accent-color);
            color: var(--white);
            padding: 10px 25px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9rem;
            transition: background-color 0.3s, transform 0.3s;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            background-color: #6d370f;
            transform: translateY(-3px);
        }
        
        .btn:disabled {
            background-color: var(--dark-gray);
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background-color: var(--medium-blue);
        }
        
        .btn-secondary:hover {
            background-color: #3a5a85;
        }
        
        /* Magazine Preview Section */
        .magazine-preview {
            padding: 60px 0;
            background-color: var(--pale-blue);
        }
        
        .preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .preview-item {
            background-color: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .preview-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .preview-image {
            height: 500px;
            width: 100%;
            overflow: hidden;
        }
        
        .preview-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .preview-item:hover .preview-image img {
            transform: scale(1.05);
        }
        
        .preview-content {
            padding: 25px;
        }
        
        .preview-content h3 {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .preview-content p {
            color: var(--secondary-color);
            line-height: 1.6;
        }
        
        .preview-cta {
            text-align: center;
            padding: 30px;
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .preview-cta p {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        @media (max-width: 768px) {
            .preview-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .preview-image {
                height: 350px;
            }
        }
        
        /* QR Code Section */
        .qr-section {
            padding: 60px 0;
            background-color: var(--pale-blue);
        }
        
        .qr-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: var(--white);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .qr-container h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        
        .qr-container p {
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .qr-image {
            max-width: 300px;
            margin: 0 auto 20px;
        }
        
        .qr-image img {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }
        
        .qr-instructions {
            background-color: rgba(168, 208, 240, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .qr-instructions h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .qr-instructions ol {
            text-align: left;
            padding-left: 20px;
        }
        
        .qr-instructions li {
            margin-bottom: 8px;
            color: var(--secondary-color);
        }
        
        /* Ebook Access Section */
        .ebook-access {
            padding: 60px 0;
            background-color: var(--pale-blue);
        }
        
        .access-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: var(--white);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--gray);
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(139, 69, 19, 0.2);
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--accent-color);
            color: var(--white);
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .login-btn:hover {
            background-color: #6d370f;
        }
        
        .login-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        
        .login-status.success {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }
        
        .login-status.error {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }
        
        .ebook-viewer {
            display: none;
            width: 100%;
            height: 80vh;
            margin-top: 30px;
            border: none;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .request-access {
            margin-top: 20px;
            text-align: center;
        }
        
        .request-access p {
            margin-bottom: 15px;
            color: var(--secondary-color);
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
            padding: 60px 0;
            background-color: var(--pale-blue);
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--white);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray);
        }
        
        .admin-title {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        .add-user-form {
            background-color: rgba(168, 208, 240, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .users-list {
            margin-top: 30px;
        }
        
        .users-list h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--gray);
        }
        
        .user-item:last-child {
            border-bottom: none;
        }
        
        .user-details {
            flex: 1;
        }
        
        .user-email-display {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .user-date {
            font-size: 0.85rem;
            color: var(--dark-gray);
        }
        
        .delete-user-btn {
            background-color: var(--error-color);
            color: var(--white);
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background-color 0.3s;
        }
        
        .delete-user-btn:hover {
            background-color: #c82333;
        }
        
        /* Where to Buy Section */
        .where-to-buy {
            padding: 60px 0;
            background-color: var(--pale-blue);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .section-title h2 {
            font-size: 2rem;
            color: var(--primary-color);
            position: relative;
            display: inline-block;
            padding-bottom: 15px;
        }
        
        .section-title h2::after {
            content: '';
            position: absolute;
            width: 70px;
            height: 3px;
            background-color: var(--accent-color);
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .retailers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .retailer-card {
            background-color: var(--white);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .retailer-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .retailer-img {
            height: 400px;
            width: 100%;
            object-fit: contain;
            padding: 20px;
            background-color: var(--white);
        }
        
        /* Slideshow Styles */
        .slideshow-container {
            position: relative;
            height: 400px;
            background-color: var(--white);
            overflow: hidden;
        }
        
        .slide {
            display: none;
            height: 100%;
            width: 100%;
            object-fit:cover;
            padding: 20px;
            position:relative;
            top: 0;
            left: 0;
        }
        
        .slide.active {
            display: block;
        }
        
        .retailer-content {
            padding: 20px;
        }
        
        .retailer-category {
            color: var(--accent-color);
            font-size: 0.9rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        
        .retailer-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .retailer-excerpt {
            color: var(--secondary-color);
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        
        .retailer-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--dark-gray);
        }
        
        /* Contributors Section */
        .contributors {
            padding: 60px 0;
            background-color: var(--sky-blue);
        }
        
        .contributors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .contributor-card {
            background-color: var(--white);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
        }
        
        .contributor-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .contributor-img {
            height: 350px;
            width: 100%;
            object-fit: cover;
        }
        
        .contributor-content {
            padding: 20px;
        }
        
        .contributor-name {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .contributor-role {
            color: var(--accent-color);
            font-size: 0.95rem;
            margin-bottom: 15px;
        }
        
        .contributor-bio {
            color: var(--secondary-color);
            font-size: 0.9rem;
        }
        
        /* Editor's Statement Section */
        .editor-statement {
            padding: 60px 0;
            background-color: var(--sky-blue);
            position: relative;
        }
        
        .editor-statement::before {
            content: '"';
            position: absolute;
            top: 20px;
            left: 30px;
            font-size: 6rem;
            color: rgba(255, 255, 255, 0.2);
            font-family: serif;
        }
        
        .editor-content {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--white);
            padding: 30px 20px;
            border-radius: 5px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }
        
        .editor-content h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-align: center;
        }
        
        .editor-content p {
            margin-bottom: 15px;
            color: var(--secondary-color);
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .editor-content .quote {
            font-style: italic;
            border-left: 4px solid var(--accent-color);
            padding-left: 15px;
            margin: 20px 0;
            color: var(--dark-gray);
            font-size: 0.95rem;
        }
        
        .editor-signature {
            text-align: right;
            margin-top: 25px;
            font-style: italic;
            color: var(--primary-color);
        }
        
        .editor-signature .name {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .editor-signature .title {
            color: var(--dark-gray);
            font-size: 0.9rem;
        }
        
        /* About Section */
        .about {
            padding: 60px 0;
            background-color: var(--pale-blue);
        }
        
        .about-content {
            display: flex;
            gap: 30px;
            align-items: center;
            flex-direction: column;
        }
        
        .about-text {
            flex: 1;
        }
        
        .about-text h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .about-text p {
            margin-bottom: 15px;
            color: var(--secondary-color);
            font-size: 1rem;
        }
        
        .about-image {
            flex: 1;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
        }
        
        .about-image img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        /* Footer */
        footer {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 50px 0 20px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 2px;
            background-color: var(--accent-color);
            bottom: 0;
            left: 0;
        }
        
        .footer-column p {
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 0.9rem;
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 12px;
        }
        
        .footer-column ul li a {
            color: var(--white);
            text-decoration: none;
            transition: color 0.3s;
            font-size: 0.9rem;
        }
        
        .footer-column ul li a:hover {
            color: var(--accent-color);
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--white);
            transition: background-color 0.3s, transform 0.3s;
        }
        
        .social-links a:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85rem;
        }
        
        /* Contact links styling */
        .contact-link {
            color: var(--dark-gray);
            text-decoration: none;
            transition: color 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .contact-link:hover {
            color: var(--accent-color);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            overflow: auto;
        }
        
        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: modalopen 0.4s;
        }
        
        @keyframes modalopen {
            from {opacity: 0; transform: translateY(-50px);}
            to {opacity: 1; transform: translateY(0);}
        }
        
        .close {
            color: var(--dark-gray);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }
        
        .close:hover {
            color: var(--accent-color);
        }
        
        .modal-title {
            text-align: center;
            margin-bottom: 25px;
            color: var(--primary-color);
            font-size: 1.8rem;
        }
        
        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .loading.active {
            display: block;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--accent-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile Responsive */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--primary-color);
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                padding: 15px;
            }
            
            .logo {
                margin-bottom: 15px;
            }
            
            nav ul {
                flex-direction: column;
                align-items: center;
                width: 100%;
            }
            
            nav ul li {
                margin: 10px 0;
            }
            
            .menu-toggle {
                display: block;
                position: absolute;
                top: 20px;
                right: 20px;
            }
            
            nav {
                display: none;
                width: 100%;
            }
            
            nav.active {
                display: block;
            }
            
            .user-account {
                flex-direction: column;
                gap: 10px;
                margin-top: 15px;
            }
            
            .hero {
                height: 40vh;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .retailers-grid {
                grid-template-columns: 1fr;
            }
            
            .contributors-grid {
                grid-template-columns: 1fr;
            }
            
            .contributor-img {
                height: 200px;
            }
            
            .editor-statement::before {
                font-size: 4rem;
            }
            
            .editor-content h2 {
                font-size: 1.5rem;
            }
            
            .editor-content p {
                font-size: 0.95rem;
            }
            
            .about-content {
                flex-direction: column;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .footer-column h3::after {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .social-links {
                justify-content: center;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <img src="tlsmlogo.jpg" alt="The Local Storyteller Magazine Logo">
                <div>
                    <div class="logo-text">The Local Storyteller</div>
                    <div class="tagline">Stories that shape our community</div>
                </div>
            </div>
            <div class="user-account">
                <div class="user-info" id="userInfo">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-email" id="userEmail">user@example.com</div>
                    <button class="logout-btn" id="logoutBtn">Logout</button>
                </div>
            </div>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <nav id="mainNav">
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#where-to-buy">Where to Buy</a></li>
                    <li><a href="#ebook-access">Ebook Access</a></li>
                    <li><a href="#contributors">People</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#admin-panel" id="adminLink" style="display: none;">Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>Capturing Local Voices</h1>
            <p>Every community has a story. We're here to tell yours.</p>
            <button class="btn" id="buyNowBtn">Buy Now</button>
        </div>
    </section>

    <!-- Magazine Preview Section -->
    <section class="magazine-preview" id="magazine-preview">
        <div class="container">
            <div class="section-title">
                <h2>Magazine Preview</h2>
            </div>
            <div class="preview-container">
                <div class="preview-item">
                    <div class="preview-image">
                        <img src="tlsmfront.jpeg" alt="The Local Storyteller Magazine Issue 1 Cover">
                    </div>
                    <div class="preview-content">
                        <h3>Issue #1: "Fragments of the Truth"</h3>
                        <p>The first issue of The Local Storyteller Magazine features a captivating cover with our theme "Fragments of the Truth". This edition showcases local voices and stories that explore the many facets of truth in our community.</p>
                    </div>
                </div>
                <div class="preview-item">
                    <div class="preview-image">
                        <img src="contentmag.jpg" alt="Table of Contents">
                    </div>
                    <div class="preview-content">
                        <h3>Featured Stories</h3>
                        <p>Browse through our curated collection of stories including "Epiphyte" by Jenny Hor, "Blue" by Aleya Amani, "Sawi and Kopitiam" by Melissa Leong, and more. Each story offers a unique perspective on truth in our local context.</p>
                    </div>
                </div>
            </div>
            <div class="preview-cta">
                <p>Want to read the full magazine? Purchase your copy today!</p>
                <button class="btn" id="buyNowBtn2">Buy Now</button>
            </div>
        </div>
    </section>

    <!-- QR Code Section -->
    <section class="qr-section" id="qr-section">
        <div class="container">
            <div class="qr-container">
                <h2>Payment Information</h2>
                <p>Scan the QR code below to make your payment</p>
                <div class="qr-image">
                    <img src="https://z-cdn-media.chatglm.cn/files/4734dd31-436c-42e9-b08e-a6bc3fae8b7e.jpg?auth_key=1864934978-16bc8d76c1f5465691d01dd84d668dfe-0-18428b15f1725a8ffb5fbc83ccaa51c5" alt="Payment QR Code">
                </div>
                <div class="qr-instructions">
                    <h3>How to Access the Ebook</h3>
                    <ol>
                        <li>Scan the QR code to make your payment</li>
                        <li>Take a screenshot of your payment receipt</li>
                        <li>Email the receipt to thelocalstorytellermagazine@gmail.com</li>
                        <li>Wait for our team to verify your payment</li>
                        <li>You'll receive a special password to access the ebook</li>
                        <li>Use your email and password to unlock the digital version</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- Ebook Access Section -->
    <section class="ebook-access" id="ebook-access">
        <div class="container">
            <div class="section-title">
                <h2>Ebook Access</h2>
            </div>
            <div class="access-container">
                <div id="loginForm">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="thelocalstorytellermagazine@gmail.com">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" placeholder="storyteller99">
                    </div>
                    <button class="login-btn" id="loginBtn">Access Ebook</button>
                    <div class="login-status" id="loginStatus"></div>
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p>Verifying credentials...</p>
                    </div>
                    <div class="request-access">
                        <p>Don't have access yet? <a href="#qr-section">Make a payment</a> and email us your receipt to receive your password.</p>
                    </div>
                </div>
                <iframe id="ebookViewer" class="ebook-viewer" src="" allowfullscreen></iframe>
            </div>
        </div>
    </section>

    <!-- Admin Panel -->
    <section class="admin-panel" id="admin-panel">
        <div class="container">
            <div class="admin-container">
                <div class="admin-header">
                    <h2 class="admin-title">Admin Panel</h2>
                    <button class="btn btn-secondary" id="refreshUsersBtn">Refresh Users</button>
                </div>
                
                <div class="add-user-form">
                    <h3>Add Authorized User</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newUserEmail">Email</label>
                            <input type="email" id="newUserEmail" placeholder="user@example.com">
                        </div>
                        <div class="form-group">
                            <label for="newUserPassword">Password</label>
                            <input type="password" id="newUserPassword" placeholder="Enter password">
                        </div>
                    </div>
                    <button class="btn" id="addUserBtn">Add User</button>
                </div>
                
                <div class="users-list">
                    <h3>Authorized Users</h3>
                    <div id="usersList">
                        <!-- Users will be dynamically added here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Where to Buy Section -->
    <section class="where-to-buy" id="where-to-buy">
        <div class="container">
            <div class="section-title">
                <h2>Where to Buy</h2>
            </div>
            <div class="retailers-grid">
                <div class="retailer-card">
                    <div class="slideshow-container">
                        <img src="moccc.jpeg" alt="MOC" class="slide active">
                        <img src="Mocfront.jpeg" alt="MOC" class="slide">
                    </div>
                    <div class="retailer-content">
                        <div class="retailer-category">Retailer</div>
                        <h3 class="retailer-title">MOC (Ministry of Cakes)</h3>
                        <p class="retailer-excerpt">Find our magazine at MOC while enjoying exquisite sweet treats.</p>
                        <div class="retailer-meta">
                            <span>10-1, Petaling Utama Avenue, Jalan PJS 1/50, 46150 Petaling Jaya.</span>
                        </div>
                    </div>
                </div>
                <div class="retailer-card">
                    <img src="tgslogo.jpeg" alt="Gelato Spot SS15" class="retailer-img">
                    <div class="retailer-content">
                        <div class="retailer-category">Retailer</div>
                        <h3 class="retailer-title">Gelato Spot SS15</h3>
                        <p class="retailer-excerpt">Come by Gelato Spot SS15 to get your copy while enjoying their heavenly refreshing gelatos.</p>
                        <div class="retailer-meta">
                            <span>SS15, Subang Jaya</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contributors Section -->
    <section class="contributors" id="contributors">
        <div class="container">
            <div class="section-title">
                <h2>Contributors & Owners</h2>
            </div>
            <div class="contributors-grid">
                <div class="contributor-card">
                    <img src="kavinfounder.jpg" alt="N. Kavineshwer" class="contributor-img">
                    <div class="contributor-content">
                        <h3 class="contributor-name">N. Kavineshwer</h3>
                        <div class="contributor-role">Editor-in-Chief & Founder</div>
                        <p class="contributor-bio">Former aspiring writer with a passion for giving local voices a platform to be heard.</p>
                    </div>
                </div>
                <div class="contributor-card">
                    <img src="cofoundertlsm.jpeg" alt="Contributor" class="contributor-img">
                    <div class="contributor-content">
                        <h3 class="contributor-name">Mithesh Kumar Muralidharan</h3>
                        <div class="contributor-role">Co-Founder</div>
                        <p class="contributor-bio">The Co-Founder of TLSM who made this possible.</p>
                    </div>
                </div>
                <div class="contributor-card">
                    <img src="designfella.jpeg" alt="Contributor" class="contributor-img">
                    <div class="contributor-content">
                        <h3 class="contributor-name">N. Praavin Shaoun</h3>
                        <div class="contributor-role">Designer of TLSM website</div>
                        <p class="contributor-bio">Creator and Editor of the TLSM webpage.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Editor's Statement Section -->
    <section class="editor-statement" id="editor-statement">
        <div class="container">
            <div class="editor-content">
                <h2>Editor's Statement</h2>
                <div class="quote">I believe it was Gandhi who said: "Be the change you see in the world."</div>
                <p>I was a former aspiring writer who had spent four years of his teenage years submitting short stories to international literary magazines, only to get rejected countless times. Always a rejection letter on how good the story was and yet fell short one way or the other.</p>
                <p>There were no solid local literary magazines to turn to. In an attempt to evolve my craft by reading, I only found that books cost more than a movie ticket. After coming to terms with that hard truth, I kept my writing to myself and pursued other dreams.</p>
                <p>Yet it somehow always bothered me. If I could be crushed so easily, how many others would fall the same? What hope was there for any of us? So came along, after a series of discussions and planning, The Local Storyteller Magazine (TLSM).</p>
                <p>Everyone has at least one good story in them. In a form of an essay, poem or short story. We, The Local Storyteller Magazine Family, tend to bring a change. Shine a spotlight on undiscovered and discovered talents. Encourage more people to pick up a magazine and have a light read. Catch a story. Catch a relatable feeling.</p>
                <p>So with this Issue 1: "Fragments of the Truth", we bring to you hand-picked stories that stood out to us and fit out theme the best. Congratulations to all our selected writers and those who submitted. There's always a next time. Thank you to our generous sponsors who believed in us and our cause. Finally, thanks to our TLSM team, for all the hardwork and support.</p>
                <p>Wishing you a good read.</p>
                <div class="editor-signature">
                    <div class="name">N. Kavineshwer</div>
                    <div class="title">Editor-in-Chief</div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2>About The Local Storyteller</h2>
                    <p>Founded in 2025, The Local Storyteller Magazine was born from a simple belief: every community has stories worth telling. We're dedicated to capturing the voices, experiences, and moments that define our local area.</p>
                    <p>The Local Storyteller Magazine isn't just another publication, it's something new. It's a small spark trying to modernise the way people read and write in Malaysia. We're here to make storytelling feel alive again. Honest, local, and worth sitting down for.</p>
                    <p>TLSM is built on the belief that words still matter and that good stories can move people, start conversations, and shift something in the air. We want to remind readers that reading doesn't have to feel heavy or distant. It can be as simple and comforting as a good cup of coffee.</p>
                    <p>We're not here to compete with newspapers. We're here to replace them. One café table at a time. ☕.</p>
                    <button class="btn" id="buyNowBtn3">Buy Now</button>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1589998059171-988d887df646?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1776&q=80" alt="Our Team">
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact" style="padding: 60px 0; background-color: var(--pale-blue);">
        <div class="container">
            <div class="section-title">
                <h2>Contact Us</h2>
            </div>
            <div style="text-align: center; max-width: 600px; margin: 0 auto;">
                <p style="margin-bottom: 30px; font-size: 1.1rem;">Have questions or want to get in touch? Reach out to us using the information below.</p>
                <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
                    <a href="tel:+60128510364" class="contact-link" style="font-size: 1.1rem;">
                        <i class="fas fa-phone"></i> +60128510364
                    </a>
                    <a href="tel:+60126171724" class="contact-link" style="font-size: 1.1rem;">
                        <i class="fas fa-phone"></i> +60126171724
                    </a>
                    <a href="mailto:thelocalstorytellermagazine@gmail.com" class="contact-link" style="font-size: 1.1rem;">
                        <i class="fas fa-envelope"></i> thelocalstorytellermagazine@gmail.com
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>The Local Storyteller</h3>
                    <p>Dedicated to capturing the voices and stories that shape our community. Every person, every place, every story matters.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-instagram"></i></a> <p>: tlsm_my</p>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#where-to-buy">Where to Buy</a></li>
                        <li><a href="#ebook-access">Ebook Access</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Where to Buy</h3>
                    <ul>
                        <li><a href="#where-to-buy">MOC(Ministry of Cakes)</a></li>
                        <li><a href="#where-to-buy">Gelato Spot SS15</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul>
                        <li>
                            <a href="tel:+60128510364" class="contact-link">
                                <i class="fas fa-phone"></i> +60128510364
                            </a>
                        </li>
                        <li>
                            <a href="tel:+60126171724" class="contact-link">
                                <i class="fas fa-phone"></i> +60126171724
                            </a>
                        </li>
                        <li>
                            <a href="mailto:thelocalstorytellermagazine@gmail.com" class="contact-link">
                                <i class="fas fa-envelope"></i> thelocalstorytellermagazine@gmail.com
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 The Local Storyteller Magazine. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Buy Now Modal -->
    <div id="buyNowModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 class="modal-title">Purchase Options</h2>
            
            <div style="text-align: center; padding: 20px;">
                <p>Choose how you'd like to purchase The Local Storyteller Magazine:</p>
                
                <div style="margin: 30px 0;">
                    <h3>Physical Copy</h3>
                    <p>Get your physical copy delivered to you.</p>
                    <button class="btn" id="purchasePhysicalBtn" style="margin-top: 20px;">Purchase on Shopee</button>
                </div>
                
                <div style="margin: 30px 0;">
                    <h3>Digital Copy</h3>
                    <p>Get instant access to the digital version.</p>
                    <button class="btn btn-secondary" id="purchaseDigitalBtn" style="margin-top: 20px;">View Payment Options</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <script>
    // Firebase configuration - Replace with your own config
    // Firebase configuration - Replace with your own config
const firebaseConfig = {
    apiKey: "AIzaSyDwSb5KA_E312wFMMZAp3Frp57SFfLy52c",
    authDomain: "tlsmpublications.firebaseapp.com",
    projectId: "tlsmpublications",
    storageBucket: "tlsmpublications.firebasestorage.app",
    messagingSenderId: "998715314010",
    appId: "1:998715314010:web:953b4c7d4f760f3dad6d63",
    measurementId: "G-0QRK9SCQFR"
};

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // DOM Elements
    const menuToggle = document.getElementById('menuToggle');
    const mainNav = document.getElementById('mainNav');
    const loginBtn = document.getElementById('loginBtn');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const loginStatus = document.getElementById('loginStatus');
    const loginForm = document.getElementById('loginForm');
    const ebookViewer = document.getElementById('ebookViewer');
    const loading = document.getElementById('loading');
    const userInfo = document.getElementById('userInfo');
    const userEmail = document.getElementById('userEmail');
    const userAvatar = document.getElementById('userAvatar');
    const logoutBtn = document.getElementById('logoutBtn');
    const adminLink = document.getElementById('adminLink');
    const adminPanel = document.getElementById('admin-panel');
    const addUserBtn = document.getElementById('addUserBtn');
    const newUserEmail = document.getElementById('newUserEmail');
    const newUserPassword = document.getElementById('newUserPassword');
    const usersList = document.getElementById('usersList');
    const refreshUsersBtn = document.getElementById('refreshUsersBtn');

    // Mobile menu toggle
    menuToggle.addEventListener('click', function() {
        mainNav.classList.toggle('active');
    });

    // Auto-slideshow functionality
    let slideIndex = 0;
    const slides = document.getElementsByClassName("slide");
    
    function showSlides() {
        for (let i = 0; i < slides.length; i++) {
            slides[i].classList.remove("active");
        }
        
        slideIndex++;
        
        if (slideIndex > slides.length) {
            slideIndex = 1;
        }
        
        slides[slideIndex - 1].classList.add("active");
        
        setTimeout(showSlides, 3000);
    }
    
    showSlides();

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 80,
                    behavior: 'smooth'
                });
                
                if (mainNav.classList.contains('active')) {
                    mainNav.classList.remove('active');
                }
            }
        });
    });

    // Buy Now Modal functionality
    const modal = document.getElementById('buyNowModal');
    const buyNowBtns = document.querySelectorAll('#buyNowBtn, #buyNowBtn2, #buyNowBtn3');
    const closeBtn = document.querySelector('.close');
    const purchasePhysicalBtn = document.getElementById('purchasePhysicalBtn');
    const purchaseDigitalBtn = document.getElementById('purchaseDigitalBtn');

    buyNowBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            modal.style.display = 'block';
        });
    });

    purchasePhysicalBtn.addEventListener('click', function() {
        window.open('https://my.shp.ee/qTqz63d', '_blank');
        modal.style.display = 'none';
    });

    purchaseDigitalBtn.addEventListener('click', function() {
        modal.style.display = 'none';
        document.getElementById('qr-section').scrollIntoView({ behavior: 'smooth' });
    });

    closeBtn.addEventListener('click', function() {
        modal.style.display = 'none';
    });

    window.addEventListener('click', function(event) {
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    });

    // Authentication functions
    function showLoginStatus(message, type) {
        loginStatus.textContent = message;
        loginStatus.className = 'login-status ' + type;
        loginStatus.style.display = 'block';
        
        setTimeout(() => {
            loginStatus.style.display = 'none';
        }, 5000);
    }

    function showLoading(show) {
        if (show) {
            loading.classList.add('active');
            loginBtn.disabled = true;
        } else {
            loading.classList.remove('active');
            loginBtn.disabled = false;
        }
    }

    function updateUserUI(user) {
        if (user) {
            // User is signed in
            userInfo.classList.add('active');
            userEmail.textContent = user.email;
            userAvatar.textContent = user.email.charAt(0).toUpperCase();
            
            // Check if user is admin
            if (user.email === 'thelocalstorytellermagazine@gmail.com') {
                adminLink.style.display = 'block';
            }
            
            // Show ebook viewer if user is authorized
            checkAuthorization(user.email);
        } else {
            // User is signed out
            userInfo.classList.remove('active');
            adminLink.style.display = 'none';
            loginForm.style.display = 'block';
            ebookViewer.style.display = 'none';
        }
    }

    async function checkAuthorization(email) {
        try {
            const doc = await db.collection('authorized_users').doc(email).get();
            
            if (doc.exists) {
                // User is authorized, show ebook
                loginForm.style.display = 'none';
                ebookViewer.style.display = 'block';
                ebookViewer.src = 'https://heyzine.com/flip-book/b206e80e25.html';
            } else {
                // User is not authorized
                showLoginStatus('Your email is not authorized to access the ebook. Please make a payment and email us your receipt.', 'error');
            }
        } catch (error) {
            console.error('Error checking authorization:', error);
            showLoginStatus('Error verifying authorization. Please try again.', 'error');
        }
    }

    // Login button event
    loginBtn.addEventListener('click', async function() {
        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();
        
        if (!email || !password) {
            showLoginStatus('Please enter both email and password', 'error');
            return;
        }
        
        showLoading(true);
        
        try {
            // First, check if user is authorized in Firestore
            const doc = await db.collection('authorized_users').doc(email).get();
            
            if (!doc.exists) {
                showLoginStatus('Your email is not authorized to access the ebook. Please make a payment and email us your receipt.', 'error');
                showLoading(false);
                return;
            }
            
            // User is authorized, now authenticate with Firebase
            await auth.signInWithEmailAndPassword(email, password);
            
            showLoginStatus('Access granted! Loading ebook...', 'success');
            
            setTimeout(() => {
                loginForm.style.display = 'none';
                ebookViewer.style.display = 'block';
                ebookViewer.src = 'https://heyzine.com/flip-book/b206e80e25.html';
            }, 1500);
            
        } catch (error) {
            console.error('Login error:', error);
            if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
                showLoginStatus('Invalid email or password. Please check your credentials.', 'error');
            } else {
                showLoginStatus('Login failed. Please try again.', 'error');
            }
        } finally {
            showLoading(false);
        }
    });

    // Logout button event
    logoutBtn.addEventListener('click', function() {
        auth.signOut();
    });

    // Admin panel functions
    async function loadUsers() {
        try {
            const snapshot = await db.collection('authorized_users').get();
            usersList.innerHTML = '';
            
            snapshot.forEach(doc => {
                const user = doc.data();
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div class="user-details">
                        <div class="user-email-display">${user.email}</div>
                        <div class="user-date">Added: ${user.addedDate ? new Date(user.addedDate.toDate()).toLocaleDateString() : 'Unknown'}</div>
                    </div>
                    <button class="delete-user-btn" data-email="${user.email}">Delete</button>
                `;
                usersList.appendChild(userItem);
            });
            
            // Add delete event listeners
            document.querySelectorAll('.delete-user-btn').forEach(btn => {
                btn.addEventListener('click', async function() {
                    const email = this.getAttribute('data-email');
                    if (confirm(`Are you sure you want to delete ${email}?`)) {
                        try {
                            await db.collection('authorized_users').doc(email).delete();
                            loadUsers();
                            alert('User deleted successfully');
                        } catch (error) {
                            console.error('Error deleting user:', error);
                            alert('Error deleting user');
                        }
                    }
                });
            });
        } catch (error) {
            console.error('Error loading users:', error);
        }
    }

    // Add user button event
    addUserBtn.addEventListener('click', async function() {
        const email = newUserEmail.value.trim();
        const password = newUserPassword.value.trim();
        
        if (!email || !password) {
            alert('Please enter both email and password');
            return;
        }
        
        try {
            // Create user in Firebase Auth
            await auth.createUserWithEmailAndPassword(email, password);
            
            // Add user to authorized_users collection
            await db.collection('authorized_users').doc(email).set({
                email: email,
                addedDate: firebase.firestore.FieldValue.serverTimestamp(),
                addedBy: auth.currentUser.email
            });
            
            alert('User added successfully');
            newUserEmail.value = '';
            newUserPassword.value = '';
            loadUsers();
        } catch (error) {
            console.error('Error adding user:', error);
            if (error.code === 'auth/email-already-in-use') {
                // User already exists in auth, just add to authorized_users
                try {
                    await db.collection('authorized_users').doc(email).set({
                        email: email,
                        addedDate: firebase.firestore.FieldValue.serverTimestamp(),
                        addedBy: auth.currentUser.email
                    });
                    alert('User added successfully to authorized list');
                    newUserEmail.value = '';
                    newUserPassword.value = '';
                    loadUsers();
                } catch (addError) {
                    console.error('Error adding user to authorized list:', addError);
                    alert('Error adding user to authorized list');
                }
            } else {
                alert('Error adding user: ' + error.message);
            }
        }
    });

    // Refresh users button event
    refreshUsersBtn.addEventListener('click', loadUsers);

    // Authentication state observer
    auth.onAuthStateChanged(function(user) {
        updateUserUI(user);
        
        // Load users if admin
        if (user && user.email === 'thelocalstorytellermagazine@gmail.com') {
            loadUsers();
        }
    });

    // Check if user is already logged in on page load
    auth.onAuthStateChanged(function(user) {
        if (user) {
            updateUserUI(user);
        }
    });
    </script>
</body>
</html>